<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.6.33">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

    <meta name="author" content="Simon Oiry">

    <title>Replies to reviewers of the 1st round of Remote Sensing</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
        vertical-align: middle;
      }
    </style>

    <style>
      body.hypothesis-enabled #quarto-embed-header {
        padding-right: 36px;
      }

      #quarto-embed-header {
        height: 3em;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: solid 1px;
      }

      #quarto-embed-header h6 {
        font-size: 1.1em;
        padding-top: 0.6em;
        margin-left: 1em;
        margin-right: 1em;
        font-weight: 400;
      }

      #quarto-embed-header a.quarto-back-link,
      #quarto-embed-header a.quarto-download-embed {
        font-size: 0.8em;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: 1em;
        margin-right: 1em;
      }

      .quarto-back-container {
        padding-left: 0.5em;
        display: flex;
      }

      .headroom {
          will-change: transform;
          transition: transform 200ms linear;
      }

      .headroom--pinned {
          transform: translateY(0%);
      }

      .headroom--unpinned {
          transform: translateY(-100%);
      }      
    </style>

    <script>
    window.document.addEventListener("DOMContentLoaded", function () {

      var header = window.document.querySelector("#quarto-embed-header");
      const titleBannerEl = window.document.querySelector("body > #title-block-header");
      if (titleBannerEl) {
        titleBannerEl.style.paddingTop = header.clientHeight + "px";
      }
      const contentEl = window.document.getElementById('quarto-content');
      for (const child of contentEl.children) {
        child.style.paddingTop = header.clientHeight + "px";
        child.style.marginTop = "1em";
      }

      // Use the article root if the `back` call doesn't work. This isn't perfect
      // but should typically work
      window.quartoBackToArticle = () => {
        var currentUrl = window.location.href;
        window.history.back();
        setTimeout(() => {
            // if location was not changed in 100 ms, then there is no history back
            if(currentUrl === window.location.href){              
                // redirect to site root
                window.location.href = "...html";
            }
        }, 100);
      }

      const headroom = new window.Headroom(header, {
        tolerance: 5,
        onPin: function () {
        },
        onUnpin: function () {
        },
      });
      headroom.init();
    });
    </script>

    
<script src="../site_libs/manuscript-notebook/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-07ba0ad10f5680c660e360ac31d2f3b6.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-8a8b0083857b641f8ecf5235bb944494.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
     <script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>  
      </head>

  <body class="quarto-notebook">
    <div id="quarto-embed-header" class="headroom fixed-top bg-primary">
      
      <a onclick="window.quartoBackToArticle(); return false;" class="btn btn-primary quarto-back-link" href=""><i class="bi bi-caret-left"></i> Back to Article</a>
      <h6><i class="bi bi-journal-code"></i> Replies to reviewers of the 1st round of Remote Sensing</h6>

            <a href="../submission/Reply_to_reviewers.qmd" class="btn btn-primary quarto-download-embed" download="Reply_to_reviewers.qmd">Download Source</a>
          </div>

     <header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Replies to reviewers of the 1st round of Remote Sensing</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
        
        <div class="quarto-title-meta">

                <div>
            <div class="quarto-title-meta-heading">Author</div>
            <div class="quarto-title-meta-contents">
                        <p>Simon Oiry </p>
                      </div>
          </div>
                
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#reviewer-1" id="toc-reviewer-1" class="nav-link active" data-scroll-target="#reviewer-1">Reviewer 1</a>
  <ul class="collapse">
  <li><a href="#comment-1" id="toc-comment-1" class="nav-link" data-scroll-target="#comment-1">Comment 1</a>
  <ul class="collapse">
  <li><a href="#reply" id="toc-reply" class="nav-link" data-scroll-target="#reply">Reply</a></li>
  </ul></li>
  <li><a href="#comment-2" id="toc-comment-2" class="nav-link" data-scroll-target="#comment-2">Comment 2</a>
  <ul class="collapse">
  <li><a href="#reply-1" id="toc-reply-1" class="nav-link" data-scroll-target="#reply-1">reply</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#reviewer-2" id="toc-reviewer-2" class="nav-link" data-scroll-target="#reviewer-2">Reviewer 2</a>
  <ul class="collapse">
  <li><a href="#comment-1-1" id="toc-comment-1-1" class="nav-link" data-scroll-target="#comment-1-1">Comment 1</a>
  <ul class="collapse">
  <li><a href="#reply-2" id="toc-reply-2" class="nav-link" data-scroll-target="#reply-2">Reply</a></li>
  </ul></li>
  <li><a href="#comment-2-1" id="toc-comment-2-1" class="nav-link" data-scroll-target="#comment-2-1">Comment 2</a>
  <ul class="collapse">
  <li><a href="#reply-3" id="toc-reply-3" class="nav-link" data-scroll-target="#reply-3">Reply</a></li>
  </ul></li>
  <li><a href="#comment-3" id="toc-comment-3" class="nav-link" data-scroll-target="#comment-3">Comment 3</a>
  <ul class="collapse">
  <li><a href="#reply-4" id="toc-reply-4" class="nav-link" data-scroll-target="#reply-4">Reply</a></li>
  </ul></li>
  <li><a href="#comment-4" id="toc-comment-4" class="nav-link" data-scroll-target="#comment-4">Comment 4</a>
  <ul class="collapse">
  <li><a href="#reply-5" id="toc-reply-5" class="nav-link" data-scroll-target="#reply-5">Reply</a></li>
  </ul></li>
  <li><a href="#comment-5" id="toc-comment-5" class="nav-link" data-scroll-target="#comment-5">Comment 5</a>
  <ul class="collapse">
  <li><a href="#reply-6" id="toc-reply-6" class="nav-link" data-scroll-target="#reply-6">Reply</a></li>
  </ul></li>
  <li><a href="#comment-6" id="toc-comment-6" class="nav-link" data-scroll-target="#comment-6">Comment 6</a>
  <ul class="collapse">
  <li><a href="#reply-7" id="toc-reply-7" class="nav-link" data-scroll-target="#reply-7">Reply</a></li>
  </ul></li>
  <li><a href="#comment-7" id="toc-comment-7" class="nav-link" data-scroll-target="#comment-7">Comment 7</a>
  <ul class="collapse">
  <li><a href="#reply-8" id="toc-reply-8" class="nav-link" data-scroll-target="#reply-8">Reply</a></li>
  </ul></li>
  <li><a href="#comment-8" id="toc-comment-8" class="nav-link" data-scroll-target="#comment-8">Comment 8</a>
  <ul class="collapse">
  <li><a href="#reply-9" id="toc-reply-9" class="nav-link" data-scroll-target="#reply-9">Reply</a></li>
  </ul></li>
  <li><a href="#comment-9" id="toc-comment-9" class="nav-link" data-scroll-target="#comment-9">Comment 9</a>
  <ul class="collapse">
  <li><a href="#reply-10" id="toc-reply-10" class="nav-link" data-scroll-target="#reply-10">Reply</a></li>
  </ul></li>
  <li><a href="#comment-10" id="toc-comment-10" class="nav-link" data-scroll-target="#comment-10">Comment 10</a>
  <ul class="collapse">
  <li><a href="#reply-11" id="toc-reply-11" class="nav-link" data-scroll-target="#reply-11">Reply</a></li>
  </ul></li>
  <li><a href="#comment-11" id="toc-comment-11" class="nav-link" data-scroll-target="#comment-11">Comment 11</a>
  <ul class="collapse">
  <li><a href="#reply-12" id="toc-reply-12" class="nav-link" data-scroll-target="#reply-12">Reply</a></li>
  </ul></li>
  <li><a href="#comment-12" id="toc-comment-12" class="nav-link" data-scroll-target="#comment-12">Comment 12</a>
  <ul class="collapse">
  <li><a href="#reply-13" id="toc-reply-13" class="nav-link" data-scroll-target="#reply-13">Reply</a></li>
  </ul></li>
  <li><a href="#comment-13" id="toc-comment-13" class="nav-link" data-scroll-target="#comment-13">Comment 13</a>
  <ul class="collapse">
  <li><a href="#reply-14" id="toc-reply-14" class="nav-link" data-scroll-target="#reply-14">Reply</a></li>
  </ul></li>
  <li><a href="#comment-14" id="toc-comment-14" class="nav-link" data-scroll-target="#comment-14">Comment 14</a>
  <ul class="collapse">
  <li><a href="#reply-15" id="toc-reply-15" class="nav-link" data-scroll-target="#reply-15">Reply</a></li>
  </ul></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"></a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">      

       <section id="reviewer-1" class="level1">
<h1>Reviewer 1</h1>
<p>Overall, this paper presents a solidly researched and theoretically grounded study, offering insights into the types of seagrass bed vegetation and the importance of seagrass bed monitoring. It is a worthwhile document to read. However, there are issues related to uniqueness and experimental organization that, if addressed, could enhance its academic quality.</p>
<section id="comment-1" class="level2">
<h2 class="anchored" data-anchor-id="comment-1">Comment 1</h2>
<p>Please highlight more clearly the innovations, distinctive features, or unique content of this paper. The work conducted in this paper is indeed sufficiently rigorous, but the unique content or scientific contributions of this work are not yet prominent enough. Since the equipment and methods used in this paper are relatively mature, the distinctive contributions of the current work are not sufficient to support its scientific contributions. Please elaborate and summarize in this regard, and if possible, consider dedicating a separate chapter for a detailed explanation.</p>
<section id="reply" class="level3">
<h3 class="anchored" data-anchor-id="reply">Reply</h3>
<p>Thank you for this valuable suggestion. We appreciate your feedback on the need to further highlight the unique contributions and innovations of our study. In response, we have revised the final paragraph of the Introduction (between lines 91 and 108) to more explicitly underscore the distinctive aspects and scientific contributions of our work.</p>
<p>Specifically, we have:</p>
<ol type="1">
<li><p><strong>Clarified the unique contribution of this paper</strong> by emphasizing the broader geographical range and methodological scope of our drone remote sensing application for intertidal habitat mapping, as well as our focus on classifying diverse macrophyte types with high accuracy.</p></li>
<li><p><strong>Highlighted the novelty of our approach in integrating multiple spatial scales</strong> through the simulation of satellite resolutions and quantification of the impact of spatial resolution on classification accuracy, providing a framework to better understand challenges of satellite based-habitat mapping.</p></li>
<li><p><strong>Added a summary of the study’s contributions</strong> to contextualize our findings within existing research and underscore the broader implications of this work for coastal habitat mapping.</p>
<p>We believe these additions better address the innovative aspects of our study and strengthen the scientific contribution of the manuscript.</p></li>
</ol>
</section>
</section>
<section id="comment-2" class="level2">
<h2 class="anchored" data-anchor-id="comment-2">Comment 2</h2>
<section id="reply-1" class="level3">
<h3 class="anchored" data-anchor-id="reply-1">reply</h3>
<p>Thank you for your detailed feedback on the classification results presented in Figures 5 to 8. We appreciate your attention to the spectral representations of the Magnoliopsida category in the RGB images. Your observations regarding the varying appearances of pixels classified as seagrass in the RGB images were extremely helpful, as this distinction between different coloration of seagrasses was not sufficiently emphasized in the original manuscript.</p>
<p>In response, we have revised the main text to clarify that the Magnoliopsida class includes pixels with varying spectral signatures due to differences in physiological states, such as leaf health and senescence. These variations are visible in the RGB images, where healthy seagrass leaves appear green, while senescent or altered leaves may appear brown or even white. This variation in seagrass leaf color has been observed during the field campaign by our team.</p>
<p>To ensure accurate classification despite these spectral differences, we carefully included spectral signatures from both healthy and senescent seagrass states in the neural network classifier’s training dataset. This approach allowed the classifier to consistently recognize both states as part of the same seagrass class, ensuring that all instances of seagrass, regardless of coloration, are correctly classified as Magnoliopsida.</p>
<p>These modification of the text can be found between lines 194-197 and also between lines 280 and 284.</p>
</section>
</section>
</section>
<section id="reviewer-2" class="level1">
<h1>Reviewer 2</h1>
<p>This study focused on discriminating the seagrass and green macroalgae in the intertidal zone. High-resolution drone image is used for this work which show a higher accuracy in classifying the seagrass and other macrophytes (green algae, brown algae, red algae &amp; diatom). The approach will be helpful to work with satellite image however, several issues should be addressed before this paper can be further considered for acceptance.</p>
<section id="comment-1-1" class="level2">
<h2 class="anchored" data-anchor-id="comment-1-1">Comment 1</h2>
<p>In the “Introduction” part, previous studies on seagrass and macroalgae detection need to be described. Also, prior research using drone on seagrass is not clearly mentioned.</p>
<section id="reply-2" class="level3">
<h3 class="anchored" data-anchor-id="reply-2">Reply</h3>
<p>Thank you for this suggestion. To address it, we have expanded the Introduction between lines 91 and 93 to include relevant studies on seagrass and macroalgae detection, as well as previous research using drones for seagrass mapping. These additions clarify the context and unique contributions of our study.</p>
</section>
</section>
<section id="comment-2-1" class="level2">
<h2 class="anchored" data-anchor-id="comment-2-1">Comment 2</h2>
<p>In Table 1, three sites were used for training and other sites were used for validation. However, there are no description what is the features of those 3 sites and why they were selected for training?</p>
<section id="reply-3" class="level3">
<h3 class="anchored" data-anchor-id="reply-3">Reply</h3>
<p>Thank you for pointing this out. We have updated the manuscript to clarify why these specific sites were selected for training, emphasizing that their 8 mm of resolution allow for an accurate photo interpretation of vegetation classes. Line 146 - 149</p>
</section>
</section>
<section id="comment-3" class="level2">
<h2 class="anchored" data-anchor-id="comment-3">Comment 3</h2>
<p>Figure 2 displayed the image for five different classes. However, no clear description on each classes feature are not provided. What is the difference between each class (floating, submerged, or attached to bottom) and how they can by distinguished is not clear. What is the variance for each class. The graph only shows the reflectance value based on the wavelength, but it is not clear which value is used for this graph and how many sample are taken?</p>
<section id="reply-4" class="level3">
<h3 class="anchored" data-anchor-id="reply-4">Reply</h3>
<p>Thank you for your comments on Figure 2. In response, we have expanded the description of each class in the text to clarify their distinguishing characteristics (Lines 155 - 164). Regarding the spectral shapes shown in Figure 2, we have updated the figure caption to specify that these represent example spectral signatures that are characteristic of each class</p>
</section>
</section>
<section id="comment-4" class="level2">
<h2 class="anchored" data-anchor-id="comment-4">Comment 4</h2>
<p>Seagrass color can be varied from green to brown based on the vegetation condition. Then what process is followed to distinguish from both green and brown macroalgae.</p>
<section id="reply-5" class="level3">
<h3 class="anchored" data-anchor-id="reply-5">Reply</h3>
<p>Thank you for this accurate observation. In response, we have revised the main text to clarify that the Magnoliopsida class includes pixels with varying spectral signatures due to differences in physiological states, such as leaf health and senescence. These variations are visible in the RGB images, where healthy seagrass leaves appear green, while senescent or altered leaves may appear brown or even white. This variation in seagrass leaf color has been observed during the field campaign by our team.</p>
<p>To ensure accurate classification despite these spectral differences, we carefully included spectral signatures from both healthy and senescent seagrass states in the neural network classifier’s training dataset. This approach allowed the classifier to consistently recognize both states as part of the same seagrass class, ensuring that all instances of seagrass, regardless of coloration, are correctly classified as Magnoliopsida.</p>
<p>These modification of the text can be found between lines 194-197 and also between lines 280 and 284.</p>
</section>
</section>
<section id="comment-5" class="level2">
<h2 class="anchored" data-anchor-id="comment-5">Comment 5</h2>
<p>Description on the diatom classification (Figure 2(E)) is not clear. What is the dimension of diatom or the biofilm they produced.</p>
<section id="reply-6" class="level3">
<h3 class="anchored" data-anchor-id="reply-6">Reply</h3>
<p>Thank you for your comment. To address this, we have added clarification about the biofilm extent in the main text (Line 156- 157) and included scales in each image of Figure 2 to improve clarity.</p>
</section>
</section>
<section id="comment-6" class="level2">
<h2 class="anchored" data-anchor-id="comment-6">Comment 6</h2>
<p>In Figure 3, ‘photo interpret polygons’ is mentioned without the prior description on it.</p>
<section id="reply-7" class="level3">
<h3 class="anchored" data-anchor-id="reply-7">Reply</h3>
<p>Thank you for pointing this out. The term “photo-interpret polygons” in Figure 3 was potentially misleading, as it had not been introduced earlier in the text. We have replaced it with “training polygons” in Figure 3, and have clarified the process of creating these polygons in the text (Line 189).</p>
</section>
</section>
<section id="comment-7" class="level2">
<h2 class="anchored" data-anchor-id="comment-7">Comment 7</h2>
<p>For each class, along with the scientific name and taxonomic description the general name should be added for easy understanding.</p>
<section id="reply-8" class="level3">
<h3 class="anchored" data-anchor-id="reply-8">Reply</h3>
<p>Thank you for your feedback. In the original manuscript, both taxonomic and common names for vegetation types were used inconsistently. To improve consistency, we have replaced taxonomic names with common names wherever possible throughout the text. Additionally, we have added a new column in Table 2 to display both the taxonomic and common names for each vegetation class.</p>
</section>
</section>
<section id="comment-8" class="level2">
<h2 class="anchored" data-anchor-id="comment-8">Comment 8</h2>
<p>It is mentioned, 7 different classes were categorized for training but in Table 2, information on 5 classes are provided</p>
<section id="reply-9" class="level3">
<h3 class="anchored" data-anchor-id="reply-9">Reply</h3>
<p>Thank you for your observation. You are correct; the missing classes could have been confusing for readers. We have now added these classes to Table 2 for completeness.</p>
</section>
</section>
<section id="comment-9" class="level2">
<h2 class="anchored" data-anchor-id="comment-9">Comment 9</h2>
<p>What kind of variables are used as predictors and description on those variables is required. How many variables are used (20 or 21)?</p>
<section id="reply-10" class="level3">
<h3 class="anchored" data-anchor-id="reply-10">Reply</h3>
<p>As described in Line 198 - 201, 21 variables were used as predictors for the model, including:</p>
<ul>
<li><p>10 raw reflectance spectral bands,</p></li>
<li><p>The same 10 bands standardized, and</p></li>
<li><p>The Normalized Difference Vegetation Index (NDVI).</p></li>
</ul>
</section>
</section>
<section id="comment-10" class="level2">
<h2 class="anchored" data-anchor-id="comment-10">Comment 10</h2>
<p>Why the Equation 1 and 2 are used is not clear? The main purpose of both equation and their value need to be mentioned.</p>
<section id="reply-11" class="level3">
<h3 class="anchored" data-anchor-id="reply-11">Reply</h3>
<p>Equations 1 and 2 were applied to the raw spectral data from the drone to generate the 10 standardized reflectance bands (Equation 1) and the NDVI (Equation 2), which were used as predictors for the model. You can find this information line 198 - 203</p>
</section>
</section>
<section id="comment-11" class="level2">
<h2 class="anchored" data-anchor-id="comment-11">Comment 11</h2>
<p>Resampling was conducted to evaluate the influence of spatial resolution on classification. However, no description on the resampling resolution is provided.</p>
<section id="reply-12" class="level3">
<h3 class="anchored" data-anchor-id="reply-12">Reply</h3>
<p>Thank you for pointing this out. You are absolutely right; these details were overlooked in the original manuscript. We have revised the text at Line 249 to include this clarification.</p>
</section>
</section>
<section id="comment-12" class="level2">
<h2 class="anchored" data-anchor-id="comment-12">Comment 12</h2>
<p>In the classification figure, making a visual difference between the sediment class &amp; Phaeophyceae class is difficult due to similar color pattern.</p>
<section id="reply-13" class="level3">
<h3 class="anchored" data-anchor-id="reply-13">Reply</h3>
<p>Thank you for highlighting this issue. The color scale of the classification maps has been adjusted to improve the distinction between sediment and brown algae, addressing a key concern in the previous maps.</p>
</section>
</section>
<section id="comment-13" class="level2">
<h2 class="anchored" data-anchor-id="comment-13">Comment 13</h2>
<p>For validation, how sensitivity, specificity and accuracy are calculated need to be mentioned by using equation.</p>
<section id="reply-14" class="level3">
<h3 class="anchored" data-anchor-id="reply-14">Reply</h3>
<p>Thank you for your suggestion. The equations used to compute accuracy metrics have been added to the Materials and Methods section (Line 231 - 234) for clarity.</p>
</section>
</section>
<section id="comment-14" class="level2">
<h2 class="anchored" data-anchor-id="comment-14">Comment 14</h2>
<p>The figure caption need to be revised. The abbreviation used in figure caption need to be elaborated such as in Figure 11 ‘GLM predictions’.&nbsp;</p>
<section id="reply-15" class="level3">
<h3 class="anchored" data-anchor-id="reply-15">Reply</h3>
<p>Thank you for your suggestion. We have added descriptions for all acronyms used in the figure captions for clarity.</p>
</section>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"></h2>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1"></h2>
</section>
</section>
     </main>
<!-- /main column -->  <script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>  </div> <!-- /content --> 
  
</body></html>